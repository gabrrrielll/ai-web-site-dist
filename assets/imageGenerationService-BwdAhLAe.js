import{c as e,u as t}from"./index-BPAtvn_q.js";import"./radix-ui-dMZRe3IE.js";import"./react-vendor-jggwe9L9.js";import"./router-DHJQYTBc.js";import"./seo-CxLpKfYs.js";import"./utils-Bhdrgjh4.js";import"./ui-components-BAiaw5Su.js";const r=async r=>{if(!(await e("ai_image_generation")))throw new Error("Service usage limit reached for image generation");try{const e=`https://image.pollinations.ai/prompt/${encodeURIComponent(r)}?width=1024&height=576&seed=${Date.now()}`,o=await async function(e){try{const t=await fetch(e),r=await t.blob();return new Promise((e,t)=>{const o=new FileReader;o.onload=()=>e(o.result),o.onerror=t,o.readAsDataURL(r)})}catch(t){throw new Error("Failed to convert image URL to base64")}}(e);return await t("ai_image_generation"),o}catch(o){return await async function(e){try{const r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=1024,r.height=576,o){const a=`https://picsum.photos/1024/576?random=${Date.now()}`;return new Promise((i,n)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{o.drawImage(s,0,0,1024,576),o.fillStyle="rgba(0, 0, 0, 0.4)",o.fillRect(0,0,1024,576),o.fillStyle="white",o.font="bold 28px Arial",o.textAlign="center",o.textBaseline="middle";const a=e.split(" "),n=[];let l="";for(const e of a){const t=l+(l?" ":"")+e;o.measureText(t).width>900?l?(n.push(l),l=e):n.push(e):l=t}l&&n.push(l);const c=35,m=288-(n.length-1)*c/2;n.forEach((e,t)=>{o.fillStyle="rgba(0, 0, 0, 0.5)",o.fillText(e,514,m+t*c+2),o.fillStyle="white",o.fillText(e,512,m+t*c)}),o.font="18px Arial",o.fillStyle="rgba(255, 255, 255, 0.8)",o.fillText("AI Generated Image (Free Service)",512,500),t("ai_image_generation").catch(console.error),i(r.toDataURL("image/jpeg",.9))},s.onerror=()=>{n(new Error("Failed to load background image"))},s.src=a})}throw new Error("Canvas not supported")}catch(o){throw new Error("Failed to generate image with free service")}}(r)}};export{r as generateImage};
